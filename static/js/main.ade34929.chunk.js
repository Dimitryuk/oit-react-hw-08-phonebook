(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{104:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(26),s=n.n(a),i=(n(56),n(57),n(2)),o=n(17),u=n(5),l=n.n(u),b=n(11),j=n(9),d=n.n(j),f=n(3);d.a.defaults.baseURL="https://connections-api.herokuapp.com";var p,h=function(t){d.a.defaults.headers.common.Authorization="Bearer ".concat(t)},O=function(){d.a.defaults.headers.common.Authorization=""},x=Object(f.c)("auth/register",function(){var t=Object(b.a)(l.a.mark((function t(e,n){var r,c,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,d.a.post("users/signup",e);case 4:return c=t.sent,a=c.data,t.abrupt("return",a);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),g=Object(f.c)("auth/login",function(){var t=Object(b.a)(l.a.mark((function t(e,n){var r,c,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,d.a.post("users/login",e);case 4:return c=t.sent,a=c.data,h(a.token),t.abrupt("return",a);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),m=Object(f.c)("auth/logout",function(){var t=Object(b.a)(l.a.mark((function t(e,n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,d.a.post("/users/logout");case 4:O(),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),v=Object(f.c)("auth/refresh",function(){var t=Object(b.a)(l.a.mark((function t(e,n){var r,c,a,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(c=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return h(c),t.prev=5,t.next=8,d.a.get("/users/current");case 8:return a=t.sent,s=a.data,t.abrupt("return",s);case 13:t.prev=13,t.t0=t.catch(5),console.log(t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()),y={register:x,logOut:m,logIn:g,fetchCurrentUser:v},C={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getIsFetchingCurrent:function(t){return t.auth.getIsFetchingCurrent}},k=n(7),_=n(20),w=Object(f.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrent:!1},extraReducers:(p={},Object(k.a)(p,y.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(k.a)(p,y.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(k.a)(p,y.logIn.rejected,(function(t,e){return Object(_.a)(Object(_.a)({},t),{},{isLoading:!1,error:e.payload})})),Object(k.a)(p,y.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(k.a)(p,y.fetchCurrentUser.pending,(function(t){t.isFetchingCurrent=!0})),Object(k.a)(p,y.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetchingCurrent=!1})),Object(k.a)(p,y.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrent=!1})),p)}).reducer,I=n(1),L={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},F=function(){var t=Object(i.d)(C.getIsLoggedIn);return Object(I.jsxs)("nav",{children:[Object(I.jsx)(o.b,{to:"/",exact:!0,style:L.link,activeStyle:L.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),t&&Object(I.jsx)(o.b,{to:"/contacts",exact:!0,style:L.link,activeStyle:L.activeLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]})},S=n.p+"static/media/avatar.689a452b.jpg",A={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}};function R(){var t=Object(i.c)(),e=Object(i.d)(C.getUsername),n=S;return Object(I.jsxs)("div",{style:A.container,children:[Object(I.jsx)("img",{src:n,alt:"",width:"32",style:A.avatar}),Object(I.jsxs)("span",{style:A.name,children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",e," "]}),Object(I.jsx)("button",{type:"button",onClick:function(){return t(y.logOut())},children:"\u0412\u044b\u0439\u0442\u0438"})]})}var N={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function U(){return Object(I.jsxs)("div",{children:[Object(I.jsx)(o.b,{to:"/register",exact:!0,style:N.link,activeStyle:N.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(I.jsx)(o.b,{to:"/login",exact:!0,style:N.link,activeStyle:N.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})}var B={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}};function z(){var t=Object(i.d)(C.getIsLoggedIn);return Object(I.jsxs)("header",{style:B.header,children:[Object(I.jsx)(F,{}),t?Object(I.jsx)(R,{}):Object(I.jsx)(U,{})]})}var D=n(8),E={container:{minHeight:"calc(100vh - 50px)",display:"flex",alignItems:"center",justifyContent:"center"},title:{fontWeight:500,fontSize:48,textAlign:"center"}},W=function(){return Object(I.jsx)("div",{style:E.container,children:Object(I.jsxs)("h1",{style:E.title,children:["simple and convenient storage for your contacts"," ",Object(I.jsx)("span",{role:"img","aria-label":"\u0418\u043a\u043e\u043d\u043a\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f",children:"\ud83d\udc81\u200d\u2640\ufe0f"})]})})},q=n(19),T=n(18),V={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function J(){var t=Object(i.c)(),e=Object(r.useState)(""),n=Object(q.a)(e,2),c=n[0],a=n[1],s=Object(r.useState)(""),o=Object(q.a)(s,2),u=o[0],l=o[1],b=function(t){var e=t.target,n=e.name,r=e.value;switch(n){case"email":return a(r);case"password":return l(r);default:return}};return Object(I.jsxs)("div",{children:[Object(I.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043b\u043e\u0433\u0438\u043d\u0430"}),Object(I.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(y.logIn({email:c,password:u})),a(""),l("")},style:V.form,autoComplete:"off",children:[Object(I.jsxs)("label",{style:V.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(I.jsx)("input",{type:"email",name:"email",value:c,onChange:b})]}),Object(I.jsxs)("label",{style:V.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(I.jsx)("input",{type:"password",name:"password",value:u,onChange:b})]}),Object(I.jsxs)("button",{type:"submit",children:[Object(I.jsx)(T.b,{}),"\u0412\u043e\u0439\u0442\u0438"]})]})]})}var Z={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function M(){var t=Object(i.c)(),e=Object(r.useState)(""),n=Object(q.a)(e,2),c=n[0],a=n[1],s=Object(r.useState)(""),o=Object(q.a)(s,2),u=o[0],l=o[1],b=Object(r.useState)(""),j=Object(q.a)(b,2),d=j[0],f=j[1],p=function(t){var e=t.target,n=e.name,r=e.value;switch(n){case"name":return a(r);case"email":return l(r);case"password":return f(r);default:return}};return Object(I.jsxs)("div",{children:[Object(I.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),Object(I.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(y.register({name:c,email:u,password:d})),a(""),l(""),f("")},style:Z.form,autoComplete:"off",children:[Object(I.jsxs)("label",{style:Z.label,children:["\u0418\u043c\u044f",Object(I.jsx)("input",{type:"text",name:"name",value:c,onChange:p})]}),Object(I.jsxs)("label",{style:Z.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(I.jsx)("input",{type:"email",name:"email",value:u,onChange:p})]}),Object(I.jsxs)("label",{style:Z.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(I.jsx)("input",{type:"password",name:"password",value:d,onChange:p})]}),Object(I.jsx)("button",{type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})}var P=n(47),G=n.n(P);function H(t){var e=t.children;return Object(I.jsx)("div",{className:G.a.container,children:e})}Object(f.b)("contacts/fetchContactRequest"),Object(f.b)("contacts/fetchContactSuccess"),Object(f.b)("contacts/fetchContactError"),Object(f.b)("contacts/addContactRequest"),Object(f.b)("contacts/addContactSuccess"),Object(f.b)("contacts/addContactError"),Object(f.b)("contacts/deleteContactRequest"),Object(f.b)("contacts/deleteContactSuccess"),Object(f.b)("contacts/deleteContactError");var Q=Object(f.b)("phonebook/changeFilter");function X(){return $.apply(this,arguments)}function $(){return($=Object(b.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/contacts");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(t){return Y.apply(this,arguments)}function Y(){return(Y=Object(b.a)(l.a.mark((function t(e){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("/contacts",e);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function tt(t){return et.apply(this,arguments)}function et(){return(et=Object(b.a)(l.a.mark((function t(e){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.delete("/contacts/".concat(e));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}d.a.defaults.baseURL='"https://connections-api.herokuapp.com',d.a.defaults.baseURL="https://connections-api.herokuapp.com";var nt=Object(f.c)("contacts/fetchContacts",Object(b.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),rt=Object(f.c)("contacts/\u0441ontactsGlobal",function(){var t=Object(b.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),ct=Object(f.c)("contacts/deleteContact",function(){var t=Object(b.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tt(e);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),at=function(t){return t.contacts.phonebookContacts},st=function(t){return t.contacts.loading},it=n(30),ot=n.n(it);console.log(rt);var ut=Object(i.b)(null,(function(t){return{onSubmit:function(e,n){return t(rt(e,n))}}}))((function(t){t.phonebookContacts,t.onSubmit;var e=Object(r.useState)(""),n=Object(q.a)(e,2),c=n[0],a=n[1],s=Object(r.useState)(""),o=Object(q.a)(s,2),u=o[0],l=o[1],b=Object(i.c)(),j=Object(i.d)(at),d=function(t){var e=t.target,n=e.name,r=e.value;switch(n){case"name":a(r);break;case"number":l(r);break;default:return}};return Object(I.jsx)("div",{children:Object(I.jsxs)("form",{onSubmit:function(t){t.preventDefault();var e=c;if(j.some((function(t){return t.name===e})))return alert("Attention, the contact is already in contacts list");b(rt({name:c,number:u})),a(""),l("")},children:[Object(I.jsxs)("label",{children:[Object(I.jsx)(T.a,{style:{marginRight:"10px"}}),"Name",Object(I.jsx)("input",{className:ot.a.input__field,onChange:d,type:"text",name:"name",value:c,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0})]}),Object(I.jsxs)("label",{children:[Object(I.jsx)(T.f,{style:{marginRight:"10px"}}),"Number",Object(I.jsx)("input",{className:ot.a.input__field,onChange:d,type:"tel",name:"number",value:u,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0})]}),Object(I.jsxs)("button",{className:ot.a.form__button,type:"submit",children:[Object(I.jsx)(T.c,{style:{marginRight:"10px"}}),"Add contact"]})]})})})),lt=n(48),bt=n.n(lt),jt=Object(i.b)((function(t){return{filter:t.contacts.filter}}),(function(t){return{changeFilter:function(e){return t(Q(e))}}}))((function(t){var e=t.filter,n=t.changeFilter;return Object(I.jsxs)("div",{className:"FilterWrapper",children:[Object(I.jsx)(T.e,{style:{marginRight:"10px"}}),"Find contact by name",Object(I.jsx)("label",{htmlFor:"",children:Object(I.jsx)("input",{className:bt.a.filter__field,type:"text",name:"filter",value:e,onChange:function(t){return n(t.currentTarget.value)}})})]})})),dt=n(49),ft=n.n(dt);function pt(){return Object(I.jsx)(ft.a,{className:"loader",type:"Audio",color:"#00BFFF",height:50,width:50})}var ht=n(35),Ot=n.n(ht),xt=function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))},gt=Object(i.b)((function(t){var e=t.contacts,n=e.phonebookContacts,r=e.phonebookFilter;return{contacts:xt(n,r)}}),(function(t){return{deleteContact:function(e){return t(ct(e))},fetchContactsAll:function(){return t(nt())}}}))((function(t){var e=t.contacts,n=t.deleteContact,c=t.fetchContactsAll,a=Object(i.d)(st);return Object(r.useEffect)((function(){c()}),[]),Object(I.jsxs)("div",{children:[a&&Object(I.jsx)(pt,{}),Object(I.jsx)("ol",{className:Ot.a.contacts__list,children:e.map((function(t){var e=t.name,r=t.number,c=t.id;return Object(I.jsxs)("li",{className:"ContactList_item",children:[e," ",r,Object(I.jsxs)("button",{className:Ot.a.contacts__button,type:"button",onClick:function(){return n(c)},children:[Object(I.jsx)(T.d,{style:{marginRight:"10px"}}),"Delete"]})]},c)}))})]})}));function mt(){var t=Object(i.c)();return Object(r.useEffect)((function(){return t(nt())}),[t]),Object(I.jsxs)("div",{children:[Object(I.jsx)("h1",{children:"Phonebook"}),Object(I.jsx)(ut,{}),Object(I.jsx)("h2",{children:"Contacts"}),Object(I.jsx)(jt,{}),Object(I.jsx)(gt,{})]})}var vt=n(29),yt=["children"];function Ct(t){var e=t.children,n=Object(vt.a)(t,yt),r=Object(i.d)(C.getIsLoggedIn);return Object(I.jsxs)(D.b,Object(_.a)(Object(_.a)({},n),{},{children:[r?e:Object(I.jsx)(D.a,{to:"/login"})," "]}))}D.a;var kt=["children","restricted"];function _t(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,c=Object(vt.a)(t,kt),a=Object(i.d)(C.getIsLoggedIn)&&r;return Object(I.jsx)(D.b,Object(_.a)(Object(_.a)({},c),{},{children:a?Object(I.jsx)(D.a,{to:"/"}):e}))}function wt(){var t=Object(i.c)(),e=Object(i.d)(C.getIsFetchingCurrent);return Object(r.useEffect)((function(){t(y.fetchCurrentUser())}),[t]),Object(I.jsx)(H,{children:!e&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(z,{}),Object(I.jsx)(D.d,{children:Object(I.jsxs)(r.Suspense,{fallback:Object(I.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:[Object(I.jsx)(_t,{exact:!0,path:"/",children:Object(I.jsx)(W,{})}),Object(I.jsx)(_t,{exact:!0,path:"/register",restricted:!0,children:Object(I.jsx)(M,{})}),Object(I.jsx)(_t,{exact:!0,path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(I.jsx)(J,{})}),Object(I.jsx)(Ct,{path:"/contacts",redirectTo:"/login",children:Object(I.jsx)(mt,{})})]})})]})})}var It,Lt,Ft=n(28),St=(n(101),n(21)),At=n(50),Rt=n.n(At),Nt=n(10),Ut=Object(f.d)([],(It={},Object(k.a)(It,nt.fulfilled,(function(t,e){return e.payload})),Object(k.a)(It,rt.fulfilled,(function(t,e){var n=e.payload;return console.log(n),[].concat(Object(Ft.a)(t),[n])})),Object(k.a)(It,ct.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),It)),Bt=Object(f.d)("",Object(k.a)({},Q,(function(t,e){return e.payload}))),zt=Object(f.d)(!1,(Lt={},Object(k.a)(Lt,nt.pending,(function(){return!0})),Object(k.a)(Lt,nt.fulfilled,(function(){return!1})),Object(k.a)(Lt,nt.rejected,(function(){return!1})),Object(k.a)(Lt,rt.pending,(function(){return!0})),Object(k.a)(Lt,rt.fulfilled,(function(){return!1})),Object(k.a)(Lt,rt.rejected,(function(){return!1})),Object(k.a)(Lt,ct.pending,(function(){return!0})),Object(k.a)(Lt,ct.fulfilled,(function(){return!1})),Object(k.a)(Lt,ct.rejected,(function(){return!1})),Lt)),Dt=Object(Nt.b)({phonebookContacts:Ut,phonebookFilter:Bt,loading:zt}),Et={key:"auth",storage:Rt.a,whitelist:["token"]},Wt=Object(Ft.a)(Object(f.f)({serializableCheck:{ignoredActions:[St.a,St.f,St.b,St.c,St.d,St.e]}})),qt=Object(f.a)({reducer:{contacts:Dt,auth:Object(St.g)(Et,w)},middleware:Wt,devTools:!1}),Tt=Object(St.h)(qt),Vt=n(51);s.a.render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)(i.a,{store:qt,children:Object(I.jsx)(Vt.a,{persistor:Tt,loading:null,children:Object(I.jsx)(o.a,{children:Object(I.jsx)(wt,{})})})})}),document.getElementById("root"))},30:function(t,e,n){t.exports={input__field:"ContactForm_input__field__3XTuo",form__button:"ContactForm_form__button__opN6y"}},35:function(t,e,n){t.exports={contacts__list:"ContactList_contacts__list__7Q7UR",contacts__button:"ContactList_contacts__button__CVpzd"}},47:function(t,e,n){t.exports={container:"Container_container__2mrDP"}},48:function(t,e,n){t.exports={filter__field:"Filter_filter__field__e3gqU"}},56:function(t,e,n){},57:function(t,e,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.ade34929.chunk.js.map